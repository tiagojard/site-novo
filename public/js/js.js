function autocompleteMobile(){var e=document.getElementById("input-busca-mobile");e.addEventListener("input",function(t){var s=this;a(function(){$.ajax({method:"GET",url:"https://tiagojardim.000webhostapp.com/getPesquisa.php",data:{pesquisa:e.value},dataType:"json",success:function(e){!function(e,t){var a=e.value.toLowerCase(),s=document.getElementById("result-mobile"),n="<div>";if(null!=t)for(i=0;i<t.length;i++){n+="",n+="<div class='resultado'><a href='/pagina"+t[i].url+"'><div class='img-resultado'><img src='"+t[i].imagem+"'></div><div class='pesquisa-resultado'>";var u=t[i].pesquisa.toLowerCase().indexOf(a);n+=t[i].pesquisa.substr(0,u),n+="<strong>"+t[i].pesquisa.substr(u,a.length)+"</strong>",n+=t[i].pesquisa.substr(u+a.length,t[i].pesquisa.length),n+="</div><div class='pesquisa-assunto'>"+t[i].assunto+"</div></a></div>"}n+="</div>",s.innerHTML=n}(s,e)}})},500)});var t,a=(t=0,function(e,i){clearTimeout(t),t=setTimeout(e,i)})}function autocomplete(){var e,t=document.getElementById("busca");var i,a=(i=0,function(e,t){clearTimeout(i),i=setTimeout(e,t)});function s(t){if(!t)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(t),e>=t.length&&(e=0),e<0&&(e=t.length-1),t[e].classList.add("autocomplete-active")}function n(e){for(var i=document.getElementsByClassName("autocomplete-items"),a=0;a<i.length;a++)e!=i[a]&&e!=t&&i[a].parentNode.removeChild(i[a])}t.addEventListener("input",function(i){var s=this;a(function(){$.ajax({method:"GET",url:"https://tiagojardim.000webhostapp.com/getPesquisa.php",data:{pesquisa:t.value},dataType:"json",success:function(i){!function(i,a){var s,u,o,l,c,r,m,d=i.value;if(n(),!d)return!1;if(e=-1,(s=document.createElement("DIV")).setAttribute("id",i.id+"autocomplete-list"),s.setAttribute("class","autocomplete-items"),i.parentNode.appendChild(s),null!=a)for(m=0;m<a.length;m++){(c=document.createElement("DIV")).className="resultado",(u=document.createElement("DIV")).className="img-resultado",u.innerHTML="<img src='"+a[m].imagem+"'/>",(o=document.createElement("DIV")).className="pesquisa-resultado",(r=document.createElement("DIV")).className="pesquisa-assunto",r.innerHTML=a[m].assunto,l=document.createElement("DIV");var p=a[m].pesquisa.indexOf(d);l.innerHTML+=a[m].pesquisa.substr(0,p),l.innerHTML+="<strong>"+a[m].pesquisa.substr(p,d.length)+"</strong>",l.innerHTML+=a[m].pesquisa.substr(p+d.length,a[m].pesquisa.length),l.innerHTML+="<input type='hidden' value='"+a[m].url+"'>",l.innerHTML+="<input type='hidden' value='"+a[m].pesquisa+"'>",c.addEventListener("click",function(e){t.value=this.getElementsByTagName("input")[1].value,n(),window.location.href="/pagina"+this.getElementsByTagName("input")[0].value}),c.appendChild(u),o.appendChild(l),c.appendChild(o),c.appendChild(r),s.appendChild(c)}}(s,i)}})},500)}),t.addEventListener("keydown",function(t){var i=document.getElementById(this.id+"autocomplete-list");i&&(i=i.getElementsByTagName("div")),40==t.keyCode?(e++,s(i)):38==t.keyCode?(e--,s(i)):13==t.keyCode&&(t.preventDefault(),e>-1&&i&&i[e].click())}),document.addEventListener("click",function(e){n(e.target)})}function EscondeLimparBusca(){$("#limpar-input-mobile").css("display","none")}function MostrarLimparBusca(){$("#limpar-input-mobile").css("display","block")}function FocusBuscaMobile(){$("#input-busca-mobile").focus()}$(document).ready(function(){autocomplete(),autocompleteMobile()}),$("#topo-busca-search-icon").click(function(){$("#busca-mobile").addClass("topo-busca-mobile-ativo"),$("#input-busca-mobile").css("display","block"),$("#input-busca-mobile").val().length>0&&MostrarLimparBusca(),FocusBuscaMobile()}),$("#topo-busca-arrow-icon").click(function(){$("#busca-mobile").removeClass("topo-busca-mobile-ativo"),$("#input-busca-mobile").css("display","none"),EscondeLimparBusca(),$("#result-mobile").html(""),$("#input-busca-mobile").val("")}),$("#limpar-input-mobile").click(function(){$("#input-busca-mobile").val(""),EscondeLimparBusca(),FocusBuscaMobile(),$("#result-mobile").html("")}),$("#input-busca-mobile").keyup(function(){$(this).val().length>0?MostrarLimparBusca():EscondeLimparBusca()});