for(var elements=document.getElementsByName("btn-voto"),e=0;e<elements.length;e++)elements[e].onclick=function(){Votar(this.dataset.id,this.dataset.user,this.dataset.like,this,this.dataset.pos)};function Votar(e,o,t,n,a){var s=getCookie("userVotos"),i=!0,r=[];""!=s&&(r=JSON.parse(s)).filter(function(n){return n.id==e&&n.usuario==o&&n.pos==a&&n.like==t}).length>0&&(i=!1),i&&fetch(`https://guiadesenvolvedor-78a46.firebaseio.com/pergunta/${e}.json`).then(e=>e.json()).then(s=>{if(s.Respostas[a].usuario==o&&("true"==t?(s.Respostas[a].votos=s.Respostas[a].votos+1,0==s.Respostas[a].votos?n.parentNode.parentNode.className="votos":s.Respostas[a].votos>0?n.parentNode.parentNode.className="votos positivo":n.parentNode.parentNode.className="votos negativo",n.parentNode.children[1].innerHTML=s.Respostas[a].votos):(s.Respostas[a].votos=s.Respostas[a].votos-1,0==s.Respostas[a].votos?n.parentNode.parentNode.className="votos":s.Respostas[a].votos>0?n.parentNode.parentNode.className="votos positivo":n.parentNode.parentNode.className="votos negativo",n.parentNode.children[1].innerHTML=s.Respostas[a].votos)),fetch(`https://guiadesenvolvedor-78a46.firebaseio.com/pergunta/${e}.json`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}),0==r.filter(function(t){return t.id==e&&t.usuario==o&&t.pos==a}).length)r.push({id:e,usuario:o,pos:a,like:t});else{var i=r.filter(function(t){return t.id==e&&t.usuario==o&&t.pos!=a});i.push({id:e,usuario:o,pos:a,like:t}),r=i}setCookie("userVotos",JSON.stringify(r),1)},e=>{})}function Editor(e){var o=document.getElementById("editorGD").selectionStart,t=document.getElementById("editorGD").value,n=t.substring(0,o),a=t.substring(o,t.length),s="";switch(e.dataset.tipo){case"t":s="\n<p>\nTexto...\n</p>\n";break;case"p":s="\n<br/>\n";break;case"code":s='\n<guiacode data-code="'+e.dataset.linguagem+'">\n\n'+e.dataset.linguagem+"...\n\n</guiacode>\n";break;case"l":s='\n<a href="Digite link aqui..." title="Digite título..." target="_blank" rel="nofollow">\nDigite o texto link\n</a>\n'}document.getElementById("editorGD").value=n+s+a,console.log(""),document.getElementById("previa").innerHTML=formataCodigo(),initHilignt(),document.getElementById("editorGD").focus()}var elementsCode=document.getElementsByName("btn-code");for(e=0;e<elementsCode.length;e++)elementsCode[e].onclick=function(){Editor(this)};var editorGD=document.getElementById("editorGD");null!=editorGD&&(editorGD.onkeyup=function(){document.getElementById("previa").innerHTML=formataCodigo(),initHilignt()}),window.onload=function(){var e=document.getElementById("previa");null!=e&&(e.innerHTML=formataCodigo(),initHilignt())};var btnPerguntar=document.getElementById("btn-perguntar");null!=btnPerguntar&&(btnPerguntar.onclick=function(){window.location.href="/entrar?referrer="+window.location.href});var btnEnvio=document.getElementById("btn-enviar");function PadronisaURL(e,o){return"/pergunta/"+o+"/"+(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toLowerCase()).replace(/[àáâãäå]/g,"a")).replace(/[èéêë]/g,"e")).replace(/[íìîï]/g,"i")).replace(/[óòõôö]/g,"o")).replace(/[úùûü]/g,"u")).replace(/[ç]/g,"c")).replace(/[^a-z0-9# ]/gi,"")).trim().split(" ").filter(function(e){return""!=e}).join("-"))}function Teste(){fetch("https://guiadesenvolvedor-78a46.firebaseio.com/pergunta.json").then(e=>e.json()).then(e=>{for(var o=Object.values(e),t=0;t<o.length;t++){var n=o[t];n.url=PadronisaURL(n.pergunta,n.id),n.usuario_imagem="https://lh3.googleusercontent.com/-hUdY6-4vHVc/AAAAAAAAAAI/AAAAAAAAARY/AKxrwcYhauXix4qeNBv1iUGiYi9_4JwIqQ/s96-c-mo/photo.jpg",n.usuario_nome="Tiago Jardim Carvalho",n.usuario="108080380858689151778",console.log(n.url),fetch(`https://guiadesenvolvedor-78a46.firebaseio.com/pergunta/${n.id}.json`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})}console.log("ok")},e=>{console.log("erro")})}null!=btnEnvio&&(btnEnvio.onclick=function(){var e=new Date,o=this.dataset.id,t=RetornaUsuario();fetch(`https://guiadesenvolvedor-78a46.firebaseio.com/pergunta/${o}.json`).then(e=>e.json()).then(n=>{if(null==n.Respostas)n.Respostas=[{data:e.toLocaleString(),usuario:t.id,usuario_nome:t.nome,votos:0,resposta:document.getElementById("previa").innerHTML}];else{var a={data:e.toLocaleString(),usuario:t.id,usuario_nome:t.nome,votos:0,resposta:document.getElementById("previa").innerHTML};n.Respostas.push(a)}n.id=o,n.url=PadronisaURL(n.pergunta,n.id),n.description=n.pergunta+". Guia completo de programação onde esta tudo que você procura.",fetch(`https://guiadesenvolvedor-78a46.firebaseio.com/pergunta/${o}.json`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}),window.location.href=window.location.href},e=>{})});