
for(var elements=document.getElementsByName("btn-voto"),e=0;e<elements.length;e++)elements[e].onclick=function(){Votar(this.dataset.id,this.dataset.user,this.dataset.like,this)};function Votar(id,usuario,like,element){var usuarioVotos=getCookie("usuarioVotos"),podeVotar=!0,arrVotos=[];""!=usuarioVotos&&(arrVotos=JSON.parse(usuarioVotos)).filter(function(o){return o.id==id&&o.usuario==usuario}).length>0&&(podeVotar=!1);if(podeVotar){fetch(`https://guiadesenvolvedor-78a46.firebaseio.com/pergunta/${id}.json`).then(res=>res.json()).then((result)=>{for(var i = 0; i <result.Respostas.length; i++){result.Respostas[i].usuario==usuario&&("true"==like?(result.Respostas[i].votos=result.Respostas[i].votos+1,0==result.Respostas[i].votos?element.parentNode.parentNode.className="votos":result.Respostas[i].votos>0?element.parentNode.parentNode.className="votos positivo":element.parentNode.parentNode.className="votos negativo",element.parentNode.children[1].innerHTML=result.Respostas[i].votos):(result.Respostas[i].votos=result.Respostas[i].votos-1,0==result.Respostas[i].votos?element.parentNode.parentNode.className="votos":result.Respostas[i].votos>0?element.parentNode.parentNode.className="votos positivo":element.parentNode.parentNode.className="votos negativo",element.parentNode.children[1].innerHTML=result.Respostas[i].votos));}fetch(`https://guiadesenvolvedor-78a46.firebaseio.com/pergunta/${id}.json`,{method:"PUT",headers:{'Accept':'application/json','Content-Type':'application/json',},body:JSON.stringify(result)});arrVotos.push({id:id,usuario:usuario}),setCookie("usuarioVotos",JSON.stringify(arrVotos),1);},(error)=>{});}}function Editor(e){var t=document.getElementById("editorGD").selectionStart,n=document.getElementById("editorGD").value,o=n.substring(0,t),i=n.substring(t,n.length),a="";switch(e.dataset.tipo){case"t":a="\n<p>\nTexto...\n</p>\n";break;case"p":a="\n<br/>\n";break;case"code":a='\n<guiacode data-code="'+e.dataset.linguagem+'">\n\n'+e.dataset.linguagem+"...\n\n</guiacode>\n";break;case"l":a='\n<a href="Digite link aqui..." title="Digite título..." target="_blank" rel="nofollow">\nDigite o texto link\n</a>\n'}document.getElementById("editorGD").value=o+a+i,console.log(""),document.getElementById("previa").innerHTML=formataCodigo(),initHilignt(),document.getElementById("editorGD").focus()}for(var elementsCode=document.getElementsByName("btn-code"),e=0;e<elementsCode.length;e++)elementsCode[e].onclick=function(){Editor(this)};var editorGD=document.getElementById("editorGD");null!=editorGD&&(editorGD.onkeyup=function(){document.getElementById("previa").innerHTML=formataCodigo(),initHilignt()});window.onload=function(){var n=document.getElementById("previa");null!=n&&(n.innerHTML=formataCodigo(),initHilignt())};var btnPerguntar=document.getElementById("btn-perguntar");null!=btnPerguntar&&(btnPerguntar.onclick=function(){window.location.href="/entrar?referrer="+window.location.href});var btnEnvio=document.getElementById("btn-enviar");if(btnEnvio!=null){btnEnvio.onclick=function(){var data=new Date,id=this.dataset.id,usuario=RetornaUsuario();fetch(`https://guiadesenvolvedor-78a46.firebaseio.com/pergunta/${id}.json`).then(res => res.json()).then((result)=>{if(void 0==result.Respostas)result.Respostas=[{data:data.toLocaleString(),usuario:usuario.id,usuario_nome:usuario.nome,votos:0,resposta:document.getElementById("previa").innerHTML}];else{var resposta_nova={data:data.toLocaleString(),usuario:usuario.id,usuario_nome:usuario.nome,votos:0,resposta:document.getElementById("previa").innerHTML};result.Respostas.push(resposta_nova)}result.id=id,result.url=PadronisaURL(result.pergunta,result.id),result.description=result.pergunta+". Guia completo de programação onde esta tudo que você procura.";fetch(`https://guiadesenvolvedor-78a46.firebaseio.com/pergunta/${id}.json`,{method:"PUT",headers:{'Accept':'application/json','Content-Type': 'application/json'},body:JSON.stringify(result)});window.location.href=window.location.href;},(error)=>{});}}function PadronisaURL(e,r){return"/pergunta/"+r+"/"+(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toLowerCase()).replace(/[àáâãäå]/g,"a")).replace(/[èéêë]/g,"e")).replace(/[íìîï]/g,"i")).replace(/[óòõôö]/g,"o")).replace(/[úùûü]/g,"u")).replace(/[ç]/g,"c")).replace(/[^a-z0-9# ]/gi,"")).trim().split(" ").filter(function(e){return""!=e}).join("-"))}